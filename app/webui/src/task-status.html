<template>

  <require from="./widget"></require>
  <require from="./droppable"></require>

  <div class="taskstate panel panel-default" style="display:inline-block"
    widget.bind="{ widgetId: 'taskstatus-' + status, freeOnDrag: true}"
    droppable.bind="{ acceptableSelector: '.task', callback: changeStatus.bind(vm) }"
    style="z-index:1">
    <div class="panel-heading">
      <h3 class="panel-title">
        ${status}
      </h3>
      <p class="text-right">
        <content select="botton"></content>
      </p>
    </div>
    <div class="panel-body">
      <div repeat.for="task of tasks" class="task panel panel-default"
        widget.bind="{ widgetId: task.taskId, freeOnDrag: false}"
        style="z-index: 100">
        <div class="panel-body">
          <p>
            <strong>${task.taskName}</strong>
            <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"
              click.delegate="$parent.removeTask(task)"></span>
          </p>
          <hr>
          <ul>
            <li>
              <select class="form-control"
                value.bind="task.assigned" change.delegate="$parent.modifyTask(task)">
                <option repeat.for="member of $parent.members" value.bind="member.memberId">${member.name}</option>
              </select>
            </li>
            <li>
              <input type="date" id="deadline" class="form-control"
                  value.bind="task.deadline" change.delegate="$parent.modifyTask(task)">
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

</template>
