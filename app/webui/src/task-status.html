<template>

  <require from="./widget"></require>
  <require from="./droppable"></require>

  <div class="taskstatus panel panel-default" style="display:inline-block"
    widget.bind="{ widgetId: 'taskstatus-' + status, freeOnDrag: true}"
    droppable.bind="{ acceptableSelector: '.task', callback: changeStatus.bind(vm) }"
    style="z-index:1">
    <div class="panel-heading">
      <h3 class="panel-title">
        ${status}
      </h3>
      <p class="panel-actions text-right">
        <content select="botton"></content>
      </p>
    </div>
    <div class="panel-body">
      <div repeat.for="task of tasks" class="task panel panel-default"
        widget.bind="{ widgetId: task.taskId, freeOnDrag: false}"
        style="z-index: 100">
        <div class.bind="'panel-heading ' + $parent.deadlineCss(task.deadline)">
          <strong>${task.taskName}</strong>
          <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"
            click.delegate="$parent.removeTask(task)"></span>
        </div>
        <div class="panel-body">
          <ul>
            <li>
              <select
                value.bind="task.assigned"
                class.bind="'form-control ' + ($parent.assigned(task.assigned) ? 'assigned' : '')"
                change.delegate="$parent.modifyTask(task)">
                <option repeat.for="member of members" value.bind="member.memberId">${member.name}</option>
              </select>
            </li>
            <li>
              <input type="date" id="deadline" class="form-control"
                  value.bind="task.deadline" change.delegate="$parent.modifyTask(task)">
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

</template>
