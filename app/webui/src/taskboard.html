<link rel="stylesheet" type="text/css" href="../styles/taskboard.css">

<template>

  <require from="./task-status"></require>
  
  <div class="menu">
    <button type="button" class="btn btn-default" aria-label="Left Align" 
      ref="groupMenu" data-toggle="collapse" data-target="#group-menu" click.delegate="toggleMenu(groupMenu)">
      グループ
      <span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span>
    </button>
  <div>
  <main>
    <div id="group-menu" class="panel collapse">
      <div class="panel-body">
        <button type="button" class="btn btn-primary" click.delegate="showGroupRegister()">グループ作成</button>
        <div class="list-group">
          <a class="list-group-item disabled" repeat.for="group of registeringGroups">
            ${group.groupName} (作成中)
          </a>
          <a href="#" class="list-group-item group-enabled" repeat.for="group of groups" click.delegate="$parent.selectGroup(group)">
            ${group.groupName}
            <span if.bind="group.removing">(削除中)</span>
            <button type="button" class="btn btn-default" aria-label="Left Align"
              if.bind="!group.removing && group.admin"
              click.trigger="$parent.removeGroup(group)">
              <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
            </button>
          </a>
        </div>
      </div>
    </div>

    <div class="taskbord">
      <h3 class="text-right">${group.groupName} のタスクボード</h3>

      <div class="row">
        <div class="col-md-4" >
          <task-status ref.view-model="todoTasks" status="TODO"
            widgets.bind="widgets" tasks.bind="tasks.todo"></task-status>
        </div>
        <div class="col-md-4">
          <task-status ref.view-model="doingTasks" status="DOING"
            widgets.bind="widgets" tasks.bind="tasks.doing"></task-status>
        </div>
        <div class="col-md-4">
          <task-status ref.view-model="doneTasks" status="DONE"
            widgets.bind="widgets" tasks.bind="tasks.done"></task-status>
        </div>
    </div>
  </main>

  <div class="modal fade" ref="groupRegisterModal">
  <div class="modal-dialog">
  <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">グループ登録</h4>
      </div>
      <div class="modal-body">
        <compose view-model="group-register"></compose>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" click.delegate="fire('group-register.register')">登録</button>
      </div>
  </div>
  </div>
  </div>

</template>
